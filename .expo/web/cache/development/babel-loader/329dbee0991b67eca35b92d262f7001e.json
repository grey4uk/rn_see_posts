{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\1\\\\Documents\\\\goit_hw\\\\REACT\\\\native_project\\\\global_project\\\\screens\\\\tab\\\\MainScreen.js\";\nimport React, { useEffect, useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { auth, firestore } from \"../../firebase/config\";\nexport var MainScreen = function MainScreen() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      userId = _useSelector.userId,\n      userPosts = _useSelector.userPosts;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      allPosts = _useState2[0],\n      setAllPosts = _useState2[1];\n\n  useEffect(function () {\n    currentUser();\n  }, []);\n  useEffect(function () {\n    getCollection();\n  }, [userId]);\n\n  var currentUser = function currentUser() {\n    var currentUser;\n    return _regeneratorRuntime.async(function currentUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(auth.currentUser);\n\n          case 2:\n            currentUser = _context.sent;\n            dispatch({\n              type: \"CURRENT_USER\",\n              payload: {\n                userName: currentUser.displayName,\n                userId: currentUser.uid\n              }\n            });\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var getCollection = function getCollection() {\n    return _regeneratorRuntime.async(function getCollection$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(firestore.collection(\"posts\").onSnapshot(function (data) {\n              return setAllPosts(data.docs.map(function (doc) {\n                return doc.data();\n              }));\n            }));\n\n          case 2:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, React.createElement(FlatList, {\n    data: allPosts,\n    keyExtractor: function keyExtractor(item, indx) {\n      return indx.toString();\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(View, {\n        style: styles.imageBlock,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }\n      }, React.createElement(Image, {\n        style: styles.postImage,\n        source: {\n          uri: item.image\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 15\n        }\n      }));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }));\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#51995d38\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingTop: 50\n  },\n  imageBlock: {\n    width: 300,\n    borderRadius: 10,\n    height: 240,\n    marginBottom: 10,\n    backgroundColor: \"#fff\",\n    padding: 20\n  },\n  postImage: {\n    width: 220,\n    height: 150,\n    marginBottom: 10,\n    borderRadius: 10,\n    right: 10,\n    bottom: 10,\n    position: \"absolute\"\n  }\n});","map":{"version":3,"sources":["C:/Users/1/Documents/goit_hw/REACT/native_project/global_project/screens/tab/MainScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","auth","firestore","MainScreen","dispatch","state","user","userId","userPosts","allPosts","setAllPosts","currentUser","getCollection","type","payload","userName","displayName","uid","collection","onSnapshot","data","docs","map","doc","styles","container","item","indx","toString","imageBlock","postImage","uri","image","StyleSheet","create","flex","backgroundColor","alignItems","justifyContent","paddingTop","width","borderRadius","height","marginBottom","padding","right","bottom","position"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { StyleSheet, View, FlatList, Image } from \"react-native\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { auth, firestore } from \"../../firebase/config\";\n\nexport const MainScreen = () => {\n  const dispatch = useDispatch();\n\n  const { userId, userPosts } = useSelector((state) => state.user);\n  const [allPosts, setAllPosts] = useState([]);\n\n  useEffect(() => {\n    currentUser();\n  }, []);\n\n  useEffect(() => {\n    getCollection();\n  }, [userId]);\n\n  const currentUser = async () => {\n    const currentUser = await auth.currentUser;\n    dispatch({\n      type: \"CURRENT_USER\",\n      payload: {\n        userName: currentUser.displayName,\n        userId: currentUser.uid,\n      },\n    });\n  };\n\n  const getCollection = async () => {\n    await firestore\n      .collection(\"posts\")\n      .onSnapshot((data) => setAllPosts(data.docs.map((doc) => doc.data())));\n  };\n\n  return (\n    <View style={styles.container}>\n     \n      <FlatList\n        data={allPosts}\n        keyExtractor={(item, indx) => indx.toString()}\n        renderItem={({ item }) => {\n          return (\n            <View style={styles.imageBlock}>\n              <Image style={styles.postImage} source={{ uri: item.image }} />\n            </View>\n          );\n        }}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#51995d38\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    paddingTop: 50,\n  },\n\n  imageBlock: {\n    width: 300,\n    borderRadius: 10,\n    height: 240,\n    marginBottom: 10,\n    backgroundColor: \"#fff\",\n    padding:20\n  },\n\n  postImage: {\n    width: 220,\n    height: 150,\n    marginBottom: 10,\n    borderRadius: 10,\n    right: 10,\n    bottom: 10,\n    position: \"absolute\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}