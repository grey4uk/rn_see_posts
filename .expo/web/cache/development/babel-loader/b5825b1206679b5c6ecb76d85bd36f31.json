{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\1\\\\Documents\\\\goit_hw\\\\REACT\\\\native_project\\\\global_project\\\\components\\\\CollectionDrawing.js\";\nimport React, { useState } from \"react\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TouchableHighlight from \"react-native-web/dist/exports/TouchableHighlight\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { firestore } from \"../firebase/config\";\nimport { useNavigation } from \"@react-navigation/native\";\nexport var CollectionDrawing = function CollectionDrawing(_ref) {\n  var data = _ref.data;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      modalVisible = _useState2[0],\n      setModalVisible = _useState2[1];\n\n  var navigation = useNavigation();\n\n  var getCurrentUserPost = function getCurrentUserPost(id) {\n    var data;\n    return _regeneratorRuntime.async(function getCurrentUserPost$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(firestore.collection(\"posts\").doc(id).get());\n\n          case 2:\n            data = _context.sent;\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(firestore.collection(\"posts\").doc(id).update({\n              like: Number(data.data().like) ? Number(data.data().like) + 1 : 1\n            }));\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(FlatList, {\n    data: data,\n    keyExtractor: function keyExtractor(item, indx) {\n      return indx.toString();\n    },\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(TouchableOpacity, {\n        activeOpacity: 0.7,\n        onLongPress: function onLongPress() {\n          return navigation.navigate(\"Map\", {\n            info: item\n          });\n        },\n        style: styles.postContainer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles.like,\n        onPress: function onPress() {\n          return getCurrentUserPost(item.id);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }\n      }, item.like ? item.like : 0)), React.createElement(View, {\n        style: {\n          flexDirection: \"row\",\n          alignItems: \"center\",\n          position: \"absolute\",\n          top: 0,\n          left: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 13\n        }\n      }, React.createElement(Image, {\n        style: {\n          width: 60,\n          height: 60,\n          borderRadius: 10,\n          margin: 10\n        },\n        source: {\n          uri: item.avatar\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 15\n        }\n      }), React.createElement(TouchableOpacity, {\n        style: styles.comments,\n        onPress: function onPress() {\n          return navigation.navigate(\"Comments\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 17\n        }\n      }, \"COMMENTS\"))), React.createElement(Image, {\n        style: styles.image,\n        source: {\n          uri: item.image\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }\n      }), React.createElement(Modal, {\n        style: styles.centeredView,\n        animationType: \"slide\",\n        transparent: true,\n        visible: modalVisible,\n        onRequestClose: function onRequestClose() {\n          Alert.alert(\"Modal has been closed.\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 15\n        }\n      }, React.createElement(View, {\n        style: {\n          backgroundColor: \"#2196F3\",\n          width: \"100%\",\n          height: \"100%\",\n          justifyContent: \"center\",\n          alignItems: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableHighlight, {\n        style: {\n          marginTop: 50\n        },\n        onPress: function onPress() {\n          setModalVisible(!modalVisible);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 19\n        }\n      }, React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 23\n        }\n      }, \"Hide Modal\"), React.createElement(Image, {\n        style: styles.postImage,\n        source: {\n          uri: item.image\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 23\n        }\n      })))))));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  });\n};\nvar styles = StyleSheet.create({\n  postContainer: {\n    width: 300,\n    borderRadius: 10,\n    height: 240,\n    marginBottom: 10,\n    backgroundColor: \"#fff\",\n    padding: 20,\n    flex: 1\n  },\n  image: {\n    width: 220,\n    height: 150,\n    marginBottom: 10,\n    borderRadius: 10,\n    right: 10,\n    bottom: 10,\n    position: \"absolute\"\n  },\n  like: {\n    borderWidth: 1,\n    borderColor: \"red\",\n    borderRadius: 50,\n    width: 50,\n    height: 50,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    position: \"absolute\",\n    bottom: 15,\n    left: 15\n  },\n  comments: {},\n  centeredView: {\n    backgroundColor: \"red\",\n    width: 350,\n    height: 300,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 22\n  }\n});","map":{"version":3,"sources":["C:/Users/1/Documents/goit_hw/REACT/native_project/global_project/components/CollectionDrawing.js"],"names":["React","useState","firestore","useNavigation","CollectionDrawing","data","modalVisible","setModalVisible","navigation","getCurrentUserPost","id","collection","doc","get","update","like","Number","item","indx","toString","navigate","info","styles","postContainer","flexDirection","alignItems","position","top","left","width","height","borderRadius","margin","uri","avatar","comments","image","centeredView","Alert","alert","backgroundColor","justifyContent","marginTop","postImage","StyleSheet","create","marginBottom","padding","flex","right","bottom","borderWidth","borderColor"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  FlatList,\r\n  TouchableOpacity,\r\n  Image,\r\n  Alert,\r\n  Text,\r\n  StyleSheet,\r\n  Modal,\r\n  TouchableHighlight,\r\n  View,\r\n} from \"react-native\";\r\nimport { firestore } from \"../firebase/config\";\r\n// import { useSelector } from \"react-redux\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\n\r\nexport const CollectionDrawing = ({ data }) => {\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  // const { avatar } = useSelector((state) => state.user);\r\n  const navigation = useNavigation();\r\n  // console.log(\"navigation\", navigation);\r\n\r\n  const getCurrentUserPost = async (id) => {\r\n    const data = await firestore.collection(\"posts\").doc(id).get();\r\n    // console.log(\"data.data(\", data);\r\n    await firestore\r\n      .collection(\"posts\")\r\n      .doc(id)\r\n      .update({\r\n        like:Number(data.data().like)? Number(data.data().like) + 1:1,\r\n      });\r\n  };\r\n\r\n  return (\r\n    <FlatList\r\n      data={data}\r\n      keyExtractor={(item, indx) => indx.toString()}\r\n      renderItem={({ item }) => {\r\n        // console.log(\"post\", item);\r\n        return (\r\n          <TouchableOpacity\r\n            activeOpacity={0.7}\r\n            onLongPress={() => navigation.navigate(\"Map\", { info: item })}\r\n            style={styles.postContainer}\r\n          >\r\n            <TouchableOpacity\r\n              style={styles.like}\r\n              onPress={() => getCurrentUserPost(item.id)}\r\n            >\r\n              <Text>{item.like?item.like:0}</Text>\r\n            </TouchableOpacity>\r\n            <View\r\n              style={{\r\n                flexDirection: \"row\",\r\n                alignItems: \"center\",\r\n                position: \"absolute\",\r\n                top: 0,\r\n                left: 0,\r\n              }}\r\n            >\r\n              <Image\r\n                style={{\r\n                  width: 60,\r\n                  height: 60,\r\n                  borderRadius: 10,\r\n                  margin: 10,\r\n                }}\r\n                source={{\r\n                  uri: item.avatar,\r\n                }}\r\n              />\r\n              <TouchableOpacity\r\n                style={styles.comments}\r\n                onPress={() => navigation.navigate(\"Comments\")}\r\n              >\r\n                <Text>COMMENTS</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n            <Image style={styles.image} source={{ uri: item.image }} />\r\n            <Modal\r\n              style={styles.centeredView}\r\n              animationType=\"slide\"\r\n              transparent={true}\r\n              visible={modalVisible}\r\n              onRequestClose={() => {\r\n                Alert.alert(\"Modal has been closed.\");\r\n              }}\r\n            >\r\n              <View>\r\n                <View\r\n                  style={{\r\n                    backgroundColor: \"#2196F3\",\r\n                    width: \"100%\",\r\n                    height: \"100%\",\r\n                    justifyContent: \"center\",\r\n                    alignItems: \"center\",\r\n                  }}\r\n                >\r\n                  <TouchableHighlight\r\n                    style={{ marginTop: 50 }}\r\n                    onPress={() => {\r\n                      setModalVisible(!modalVisible);\r\n                    }}\r\n                  >\r\n                    <View>\r\n                      <Text>Hide Modal</Text>\r\n                      <Image\r\n                        style={styles.postImage}\r\n                        source={{ uri: item.image }}\r\n                      />\r\n                    </View>\r\n                  </TouchableHighlight>\r\n                </View>\r\n              </View>\r\n            </Modal>\r\n          </TouchableOpacity>\r\n        );\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  postContainer: {\r\n    width: 300,\r\n    borderRadius: 10,\r\n    height: 240,\r\n    marginBottom: 10,\r\n    backgroundColor: \"#fff\",\r\n    padding: 20,\r\n    flex: 1,\r\n  },\r\n  image: {\r\n    width: 220,\r\n    height: 150,\r\n    marginBottom: 10,\r\n    borderRadius: 10,\r\n    right: 10,\r\n    bottom: 10,\r\n    position: \"absolute\",\r\n  },\r\n  like: {\r\n    borderWidth: 1,\r\n    borderColor: \"red\",\r\n    borderRadius: 50,\r\n    width: 50,\r\n    height: 50,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    position: \"absolute\",\r\n    bottom: 15,\r\n    left: 15,\r\n  },\r\n  comments: {},\r\n  centeredView: {\r\n    backgroundColor: \"red\",\r\n    width: 350,\r\n    height: 300,\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginTop: 22,\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}